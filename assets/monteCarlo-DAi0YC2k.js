import{y as P}from"./index-aqAwuycW.js";function g(o=0,t=1){let n,s;do n=Math.random();while(n===0);s=Math.random();const e=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*s);return o+e*t}function C(o,t){return Math.exp(g(o,t))}function z(o,t,n){const s=Math.random(),e=(t-o)/(n-o);return s<e?o+Math.sqrt(s*(n-o)*(t-o)):n-Math.sqrt((1-s)*(n-o)*(n-t))}function a(o,t){if(!o.length)return 0;if(o.length===1)return o[0];const n=t/100*(o.length-1),s=Math.floor(n),e=Math.ceil(n);if(s===e)return o[s];const c=n-s;return o[s]*(1-c)+o[e]*c}function b(o){return o.length?o.reduce((t,n)=>t+n,0)/o.length:0}function L(o){if(o.length<2)return 0;const t=b(o),n=o.reduce((s,e)=>s+(e-t)**2,0)/o.length;return Math.sqrt(n)}function h(o,t,n){return Math.min(Math.max(o,t),n)}function S(o){const t={...o,assumptions:{...o.assumptions}},n=g(0,1),s=t.assumptions.automationPotential||.5;t.assumptions={...t.assumptions,automationPotential:h(g(s,.08),.1,.95)};const e=t.changeReadiness||3,c=Math.random(),p=n*.1;let u;c<.2-p?u=-1:c<.5-p?u=0:u=1,t.changeReadiness=h(e+u,1,5);const l=t.implementationBudget;if(l&&l>0){const m=-n*.08,M=h(C(m,.3),.7,1.8);t.implementationBudget=Math.round(l*M)}const d=t.ongoingAnnualCost;if(d&&d>0){const m=-n*.06,M=h(C(m,.35),.5,2);t.ongoingAnnualCost=Math.round(d*M)}const v=t.cashRealizationPct||.4;t.cashRealizationPct=h(z(.2,v,.8),.2,.8);const R=t.errorRate||.1;return t.errorRate=h(g(R,R*.25),.01,.5),t._mcMode="fast",t}function x(o,t=500){const n=[],s=[],e=[],c=[],p=[];for(let i=0;i<t;i++){const r=S(o),k=P(r),f=k.scenarios.base;n.push(f.npv),isFinite(f.irr)&&s.push(f.irr),e.push(f.paybackMonths),c.push(f.roic),p.push(k.upfrontInvestment||0)}n.sort((i,r)=>i-r),s.sort((i,r)=>i-r),e.sort((i,r)=>i-r),c.sort((i,r)=>i-r);const u=n.filter(i=>i>0).length,l=a(n,5);p.sort((i,r)=>i-r);const v=-.5*a(p,50),m=n.filter(i=>i<v).length/t,y=e.filter(i=>i>60).length/t;return{sampleSize:t,npv:{p5:l,p10:a(n,10),p25:a(n,25),p50:a(n,50),p75:a(n,75),p90:a(n,90),mean:b(n),stdDev:L(n)},irr:{p10:a(s,10),p25:a(s,25),p50:a(s,50),p75:a(s,75),p90:a(s,90),mean:b(s)},payback:{p10:a(e,10),p25:a(e,25),p50:a(e,50),p75:a(e,75),p90:a(e,90),mean:b(e)},roic:{p10:a(c,10),p25:a(c,25),p50:a(c,50),p75:a(c,75),p90:a(c,90),mean:b(c)},probabilityPositiveNPV:u/t,tailRisk:{p5Npv:l,probCapitalLoss50:m,probPaybackOver60:y},npvDistribution:n}}export{x as runMonteCarlo,S as sampleDistributions};
